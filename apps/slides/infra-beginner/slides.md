---
theme: default
title: No CUI, No Life.
info: |
  ## CUIは良いぞ
  WeztermとNeovimはいいぞ

class: text-center
# https://sli.dev/features/drawing
drawings:
  persist: true
# slide transition: https://sli.dev/guide/animations.html#slide-transitions
transition: none
# enable MDC Syntax: https://sli.dev/features/mdc
mdc: true
overviewSnapshots: true

colorSchema: dark

fonts:
  # basically the text
  sans: "Noto Sans JP"
  # sans: "Klee One"
  # use with `font-serif` css class from windicss
  serif: "Robot Slab"
  # for code blocks, inline code, etc.
  mono: "Fira Code"
---

# No <span>CUI</span>, No Life

<div class="opacity-50">
めぐろLT #22 「 LT忘年会2024 」
</div>
<div class="pt-4">
  <p class="px-2 rounded opacity-50">mozumasu</p>
</div>

<div class="abs-br m-6 flex gap-2">
  <a href="https://github.com/mozumasu/my-slides?tab=readme-ov-file" target="_blank" alt="GitHub" title="Open in GitHub"
    class="text-xl slidev-icon-btn opacity-50 !border-none !hover:text-white">
    <carbon-logo-github />
  </a>
</div>

<style>
.slidev-layout {
  background: #000428;  /* fallback for old browsers */
  background: -webkit-linear-gradient(45deg, #261040,#000428,#02032b);  /* Chrome 10-25, Safari 5.1-6 */
  background: linear-gradient(45deg, #261040,#000428,#02032b); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
}
span {
  font-size: 1.5em;
  background-color: #0d00ff;
  background-image: linear-gradient(45deg, #2baaff 10%, #a32bff 50%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---
layout: center
---

# <span>CUI</span> は良いぞ

<style>
span {
  font-size: 2.5em;
  background-color: #0d00ff;
  background-image: linear-gradient(45deg, #2baaff 10%, #a32bff 50%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---
layout: center
---

# 最も自分の思考について来れるもの

# それは <v-click><span>CUI</span></v-click>

<style>
span {
  font-size: 1.5em;
  background-color: #0d00ff;
  background-image: linear-gradient(45deg, #2baaff 10%, #a32bff 50%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---
layout: center
---

# 生活を豊かにするもの

<div class="pt-8">

それは　　　 <v-click><span>CUI</span></v-click>

</div>

<hr>

<style>
span {
  font-size: 128px;
  background-color: #0d00ff;
  background-image: linear-gradient(45deg, #2baaff 10%, #a32bff 50%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

## 自己紹介

- 好きなもの: Wezterm, Neovim, zsh, IaC
- インフラ4ヶ月目
- X: [@mozumasu](https://twitter.com/mozumasu)

<br>

<a href="https://zenn.dev/mozumasu" target="_blank">
<img src=./images/zenn-2024.png alt="Zenn" width="700">
</a>

---
layout: center
---

# CUIってなんだっけ

CUI: Character User Interface

キーボードでコマンドを入力して操作する画面

<img src="https://storage.googleapis.com/zenn-user-upload/deployed-images/08a43a1e073bbbdd72d4a4d3.gif?sha=5754a4180c7b26d61c0699e7df1e903ca46a63c8">

---
layout: center
---

# <span>[CUI]{style="color:red"}</span> 使いこなせてる？

<style>
span {
  font-size: 1.5em;
  background-color: #0d00ff;
  background-image: linear-gradient(45deg, #2baaff 10%, #a32bff 50%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---
layout: center
---

# <span>[CUI]{style="color:red"}</span> 生活を始めてみよう✨

<style>
span {
  font-size: 1.5em;
  background-color: #0d00ff;
  background-image: linear-gradient(45deg, #2baaff 10%, #a32bff 50%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---
layout: center
---

# なにから始めればいいの？🤔

---

# dotfilesを始めよう

<br>

dotfilesは設定ファイルを管理するリポジトリのこと

<a href="https://zenn.dev/mozumasu" target="_blank">
<img src=./images/dotfiles.png alt="dotfiles" width="700">
</a>
<!-- [![dotfiles](https://github-readme-stats.vercel.app/api/pin/?username=mozumasu&repo=dotfiles&theme=radical)](https://github.com/mozumasu/dotfiles) -->

<style>
h1 {
  background-color: #0d00ff;
  background-image: linear-gradient(45deg, #2baaff 10%, #a32bff 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---
layout: center
---

# 設定　=　<v-click>呼吸</v-click>

---
layout: center
---

# Q. 設定ファイル、何秒で開ける？

---
layout: center
---

# 一緒に測ってみよう！

```sh
time cat
```

---
layout: center
---

# A. 10秒未満

---

# 爆速で設定ファイルを開く

<br>

Step1. 管理ディレクトリに移動

```sh
z [移動したいディレクトリ名の一部]
```

Step2. ファイルを開く

```sh
# control + t でファイル名をfzfで選択
```

<br>

使用ツール

- https://github.com/junegunn/fzf
- https://github.com/ajeetdsouza/zoxide

---

# dotfilesによって得られる恩恵

- 別の端末になってもgit cloneでいつもの環境
- 設定ファイルに詳しくなる
- ツールに詳しくなる
- 名刺代わりになる

<br>

<v-click><span>設定を変更するハードルが下がる</span></v-click>

<style>
span {
  font-size: 1.5em;
  background-color: #0d00ff;
  background-image: linear-gradient(45deg, #2baaff 10%, #a32bff 50%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# 趣味にもピッタリ

<br>

dotfiles❤️10ヶ月目  
気づいたらコミットが積み上がっていく

<a href="https://zenn.dev/mozumasu" target="_blank">
<img src=./images/dotfiles-commits.png alt="Zenn" width="700">
</a>

---
layout: center
---

# <span>dotfiles</span> 入門

<style>
span {
  font-size: 1.5em;
  background-color: #0d00ff;
  background-image: linear-gradient(45deg, #2baaff 10%, #a32bff 50%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# 準備

CUI生活を快適にするツールをインストール

```sh
brew install gh      # GitHub CLI
brew install ghq     # ローカルでのリポジトリ管理
brew install bat     # catをより便利にカラフルに
brew install jesseduffield/lazygit/lazygit # git管理をクールに
brew install fzf     # ファジーファインダー: 曖昧検索して選択
brew install zoxide  # ディレクトリ移動の履歴を保存・移動
```

<br>
参照

> <https://formulae.brew.sh/formula/gh>  
> <https://formulae.brew.sh/formula/ghq>  
> <https://formulae.brew.sh/formula/fzf>  
> <https://formulae.brew.sh/formula/bat>  
> https://github.com/jesseduffield/lazygit?tab=readme-ov-file#homebrew

---

# 準備

クローンしたリポジトリに爆速移動できるようにしよう

Control + g でプロジェクトに移動できる

```sh
# ~/.zshrc
function ghq-fzf() {
  local src=$(ghq list | fzf --preview "bat --color=always --style=header,grid --line-range :80 $(ghq root)/{}/README.*")
  if [ -n "$src" ]; then
    BUFFER="cd $(ghq root)/$src"
    zle accept-line
  fi
  zle -R -c
}
zle -N ghq-fzf
bindkey '^g' ghq-fzf
```

設定を反映

```sh
exec $SHELL -l
```

---

# dotfilesを用意

<br>

dotfilesというGitHubリポジトリを用意

```sh
gh repo create dotfiles --private
```

GitHubリポジトリをローカルにクローン

```sh
ghq get dotfiles
```

Control + g でプロジェクトディレクトリに移動

---

# Brewfileを管理しよう

現在インストールしているパッケージをBrewfileに書き出す

```sh
brew bundle dump
```

早速Git管理だ！

```sh
git add Brewfile
git commit -m "Add Brewfile."
git push
```

GitHubリポジトリを確認してみよう

```sh
gh browse
```

---
layout: center
---

# まとめ

- CUI入門はdotfilesがおすすめ
- 設定 = 呼吸

---
layout: center
---

# ご清聴ありがとうございました

---
layout: center
---

# Tips

という名の使用しなかったスライドの供養

---

# zshの設定ファイルを追加

```sh
mv ~/.zshrc [dotfileのパス]
```

ホームディレクトリに.zshrcのシンボリックリンクを作成

```sh
ln -s [dotfileのパス]/.zshrc ~/.zshrc
```

---

# ディレクトリに戻るとき、これやってない？

cd .\./ を連発！

```sh
cd ../../../
```

<div v-click>

## もっとスマートに

直前にいたディレクトリに戻る

```sh
cd -
```

</div>

<div v-click>

プロジェクトのルートディレクトリに移動

```sh
git rev-parse --show-toplevel
```

<br>

</div>

---
layout: center
---

# コマンドが長い？覚えられない？

---

# aliasで短く

```sh
# alias設定前
git rev-parse --show-toplevel

# alias設定後
proot
```

<br>

<div v-click>

aliasの設定

```sh
# ~/.zshrc
abbr -S proot='cd $(git rev-parse --show-toplevel)' >>/dev/null
```

</div>
<div v-click>

こういうふうにもかける

```sh
abbr -S -qq proot='cd $(git rev-parse --show-toplevel)'
```

</div>

---

# aliasの設定にもいろいろ

<br>
入力後にスペースを入力したり、コマンド実行すると元のコマンドが表示される (Zshの独自機能)

```sh
abbr -S -qq ll='ls -l'
```

<br>
元のコマンドを表示しない

```sh
alias ggrks='google'
```

---

# 覚えられないなら参照しちゃおう

<br>

サクッと概要を知りたいな

```sh
fzf --help
```

詳しく知りたいな

```sh
man fzf
```

---

# zshのキーバインドを確認してみよう

```sh
bindkey
```

---

# 謎の記号だらけ...?

キーバインドを割り当てたいけど、記号がわからない

これで確認できる

```sh
cat
```

---

# オレオレキーバインド思想

キーバインドの設定で守る方針

- デフォルトのキーバインド必ず確認
- emacs/vimのキーバインドを潰さない
- 使わないキーバインドは無効化

できたら守ったほうがいいもの

- ウィンドウマネージャー(例: [AeroSpace](https://github.com/nikitabobko/AeroSpace))のキーバンドを潰さない
- ターミナルのキーバインドを潰さない

---

# CUIに影響するキーバインド設定の場

- シェル
- ターミナル
- karabiner

影響範囲は下に行くほど大きい

<div v-click>
影響範囲が大きいものから設定するのがおすすめ
</div>

---

# 案件掛け持ちあるある

<br>
管理しないといけないサーバーが増える

接続情報を入力するのが大変😵

<br>

```sh
ssh -i ~/.ssh/hoge-key hoge-user@127.0.0.0.1 -p 22
```

---

# ~/.ssh/config

```sh
# ~/.ssh/config
HOST __hoge_prod
  HOSTNAME 127.0.0.1
  User hoge-user
  Port 22
  IdentityFile ~/.ssh/hoge-key
```

before

```sh
ssh -i ~/.ssh/hoge-key hoge-user@127.0.0.0.1 -p 22
```

after

```sh
ssh __hoge_prod
```

<br>
エイリアスでssh接続できて楽ちん

<style>
h1 {
  background-color: #2B90B6;
  background-image: linear-gradient(45deg, #4EC5D4 10%, #146b8c 20%);
  background-size: 100%;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
}
</style>

---

# 案件ごとにファイルを分けて管理

<br>

Step1. configファイルを分割

````md magic-move {lines: true}
```sh
.ssh
└── config
```

```sh
.ssh
├── config
└── conf.d
    └── hosts
        ├── 案件1
        └── 案件2
```
````

<div v-click="2">
Step2. Includeで読み込む

````md magic-move {at:3, lines: true}
```sh
# ~/.ssh/config
HOST __hoge_prod
  HOSTNAME 127.0.0.1
  User hoge-user
  Port 22
  IdentityFile ~/.ssh/hoge-key
```

```sh
# ~/.ssh/config
Include conf.d/hosts/*
```
````

</div>

<br>
<div v-click="4">最初に知りたかった😇</div>

---

# 余談: 〇〇.dのdって何？

<br>

## UNIX系あるある

〇〇.d みたいな謎ディレクトリ名ありがち

- ~/.ssh/conf.d
- /etc/cron.d

<br>

<div v-click="1">

ディレクトリ (directory) を示す慣習的な命名  
設定を分割して管理するのに使われる

</div>

---

# zshであそぼ

3回も打てばあらかた覚える

hogeディレクトリとtestディレクトリを作成

拡張子`.hogehoge`のファイルを100個作成

```sh
mkdir hoge test
touch hoge/{1..100}.hoge test/{1..100}.hoge
ls hoge test
```

まとめて消す

```sh
rm -f **/*.hoge
ls hoge test
```

後片付け

```sh
rm -rf hoge test
ls hoge test
```
